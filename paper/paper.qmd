---
title: "Election Prediction Analysis: Trump vs. Harris"
subtitle: "Assessing the Probability of Electoral College Outcomes Based on Polling Data"
author: 
  - Harsh Pareek
  - Benji Fleurence
  - Arshh Relan
thanks: "Code and data are available at: https://github.com/HarshMPareek/USA_Election_Prediction
date: "`r Sys.Date()`"
abstract: "This paper aims to predict the outcome of the 2024 U.S. Presidential Election between Donald Trump and Kamala Harris by analyzing aggregated state-level polling data. Using a linear regression model and Monte Carlo simulations, we estimate the probability of each candidate winning the Electoral College."
output: pdf_document
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(palmerpenguins)
```


# Introduction

Over the last few election cycles, pollsters' reputations have taken a hit. In back-to-back general elections, pollsters predicted massive Trump losses, only for President Trump to win in 2016 and narrowly lose in 2020. Pollsters are keen on correcting their previous errors. For political campaigns that have already exceeded $16 billion between the two candidates and an election decided by slim margins, polling is vital to assess where they should use their resources.

The estimand of our paper consists of the eligible voters in the United States. Our goal is to predict what the electorate will decide, focusing on specific sub-sections in more contested regions. This focus is crucial because of the Electoral College system the U.S. uses instead of a pure popular vote. In this system, when a president wins a state, they receive all of its electoral votes, and each state has a unique number of votes. Consequently, because certain states are more competitive than others, their value in our sample should be weighted higher. For instance, a respondent from Pennsylvania will have a heavier impact on the election outcome than someone from Oklahoma.

This paper employs a combination of linear regression modeling and Monte Carlo simulations to analyze aggregated polling data. We aim to provide a comprehensive prediction of the election outcome by considering various factors influencing voter behavior and polling accuracy.

The remainder of this paper is structured as follows. @sec-data provides a detailed overview of the dataset, including variable descriptions and exploratory data analysis. @sec-model discusses the modeling approach and justifications. @sec-results presents the findings from the analysis, and @sec-discussion interprets these results in the broader political context. Finally, @sec-appendix contains supplementary materials and detailed methodological information.


# Data {#sec-data}

## Overview

We utilize aggregated polling data from multiple sources across all 50 U.S. states and the District of Columbia. The dataset focuses exclusively on polls that include both Donald Trump and Kamala Harris, ensuring consistency and comparability in the analysis. This approach allows us to capture the competitive dynamics between the two candidates across various states with differing electoral weights.

##Broader Context


Polling data serves as a critical tool for predicting election outcomes by gauging voter intentions and preferences. By aggregating this data at the state level, we account for regional variations in political landscapes and voter behavior. This granularity is essential for accurately simulating Electoral College outcomes, where state-by-state victories determine the overall election result.

## Measurement
	
Some paragraphs about how we go from a phenomena in the world to an entry in the dataset.

## Veriables explained

Add graphs, tables and text. Use sub-sub-headings for each outcome variable or update the subheading to be singular.



Some of our data is of penguins (@fig-bills), from @palmerpenguins.

```{r}
#| label: fig-bills
#| fig-cap: Bills of penguins
#| echo: false

ggplot(penguins, aes(x = island, fill = species)) +
  geom_bar(alpha = 0.8) +
  scale_fill_manual(values = c("darkorange","purple","cyan4"),
                    guide = "none") +
  theme_minimal() +
  facet_wrap(~species, ncol = 1) +
  coord_flip()
```

Talk more about it.

And also planes (@fig-planes). (You can change the height and width, but don't worry about doing that until you have finished every other aspect of the paper - Quarto will try to make it look nice and the defaults usually work well once you have enough text.)

```{r}
#| label: fig-planes
#| fig-cap: Relationship between wing length and width
#| echo: false
#| warning: false
#| message: false

analysis_data <- read_csv(here::here("data/02-analysis_data/analysis_data.csv"))

analysis_data |> 
  ggplot(aes(x = width, y = length)) +
  geom_point(alpha = 0.8) +
  theme_minimal() +
  labs(x = "Wing width (mm)",
       y = "Wing length (mm)")
```

Talk way more about it. 

## Predictor variables

Days Until Election
The days_until_election variable measures the number of days remaining until the election date at the time the poll was conducted. This temporal variable helps capture trends and shifts in voter sentiment as the election approaches.

Sample Size
Sample_size indicates the number of respondents in each poll. Larger sample sizes generally provide more reliable estimates of voter preferences and reduce the margin of error.

Methodology
The methodology variable categorizes the polling method used, such as live phone, online panel, or mixed methods. Different methodologies can introduce varying levels of bias and representativeness in the polling data.

Population
Population denotes the demographic segment targeted by the poll, including factors like age, gender, race, education level, and income bracket. This variable ensures that the polling data accurately reflects the diversity of the electorate.

# Model

The goal of our modeling strategy is twofold. Firstly, to quantify the influence of various predictors on polling percentages for each candidate. Secondly, to utilize these insights to simulate Electoral College outcomes through Monte Carlo simulations.

Here, we briefly describe the linear regression model used to investigate the relationship between polling percentages and predictors such as candidate name, days until election, sample size, methodology, population demographics, and state-specific factors. Detailed model specifications and diagnostics are included in @sec-model-details.

## Model set-up

## Linear Regression Model Specification

Define \( y_i \) as the normalized polling percentage for candidate \( i \). The linear regression model is specified as follows:

\[
y_i = \beta_0 + \beta_1 \cdot \text{candidate\_name} + \beta_2 \cdot \text{days\_until\_election} + \beta_3 \cdot \text{sample\_size} + \beta_4 \cdot \text{methodology} + \beta_5 \cdot \text{population} + \beta_6 \cdot \text{state} + \epsilon_i
\]

Where:

- \( \beta_0 \): The intercept.
- \( \beta_1 \): Captures the effect of being Kamala Harris relative to Donald Trump.
- \( \beta_2 \): Measures the change in polling percentage per additional day until the election.
- \( \beta_3 \): Represents the effect of sample size on polling percentage.
- \( \beta_4 \), \( \beta_5 \), and \( \beta_6 \): Account for variations due to polling methodology, targeted population, and state-specific factors, respectively.
- \( \epsilon_i \): The error term.

We implement the model using R's `lm()` function, leveraging the `dplyr` and `tidyr` packages for data manipulation. Model diagnostics were conducted to assess assumptions, including residual analysis and variance inflation factors (VIF) to check for multicollinearity.



### Model justification

We expect a positive relationship between the size of the wings and time spent aloft. In particular...

We can use maths by including latex between dollar signs, for instance $\theta$.


# Results

Our results are summarized in @tbl-modelresults.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false

library(rstanarm)

first_model <-
  readRDS(file = here::here("models/first_model.rds"))
```

```{r}
#| echo: false
#| eval: true
#| label: tbl-modelresults
#| tbl-cap: "Explanatory models of flight time based on wing width and wing length"
#| warning: false

modelsummary::modelsummary(
  list(
    "First model" = first_model
  ),
  statistic = "mad",
  fmt = 2
)
```




# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

Please don't use these as sub-heading labels - change them to be what your point actually is.

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}
Objective: The goal of this survey methodology is to develop a reliable, predictive model for the U.S. presidential election by surveying a representative sample of eligible American voters. This approach considers demographic, geographic, and political factors influencing voting behavior, with a budget of $100,000 to ensure comprehensive reach, quality data collection, and robust analysis.
Methodology Overview: Utilizing probability sampling techniques, data validation processes, and advanced poll aggregation, this document outlines a strategy designed to yield accurate and generalizable election forecasts.
 
Strategy: We will use stratified random sampling. This method involves dividing the target population into subgroups based on demographics such as age, gender, race, education, income, and geographic region. Random sampling within each subgroup ensures a representative cross-section of voters. We will compliment this with quota sampling to ensure that each demographic group meets sufficient representation, even if probability sampling proves challenging.
We will stratify based on age, gender, race, ethnicity, education level, household income bracket, geographical region of the USA. This allows for greater forecasting accuracy.
The ideal sample size would be 10,000 individuals. The analysis will adjust the weightage for each demographic to ensure there is proportional representation in the forecasting.
 
Recruitment Methodology: Targeted ads on social media browsers and emails based on demographics (age, gender, location, political interests). Collaborate with non-profits and civic organizations to improve reach and respondent diversity. Participation in the survey will also be incentivized, participants will have the chance to enter lucky draw competitions that have gift cards as prizes.
 
The survey will be created and distributed using Qualtrics for enhanced security and functionality.
Questions in the survey will progress in the following broad sections. At first, demographic based questions, secondly questions on political views and intended candidate, lastly verification. Surveys should not take more than 5 minutes to complete.
 
Sample budget allocation:
Outreach: $80,000
Incentives: $10,000
Qualtrics and data analysis software: $10,000
 
A sample survey is attached here.

# Additional data details

# Model details {#sec-model-details}

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows...

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows... 

```{r}
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| label: fig-ppcheckandposteriorvsprior
#| layout-ncol: 2
#| fig-cap: "Examining how the model fits, and is affected by, the data"
#| fig-subcap: ["Posterior prediction check", "Comparing the posterior with the prior"]

pp_check(first_model) +
  theme_classic() +
  theme(legend.position = "bottom")

posterior_vs_prior(first_model) +
  theme_minimal() +
  scale_color_brewer(palette = "Set1") +
  theme(legend.position = "bottom") +
  coord_flip()
```

## Diagnostics

@fig-stanareyouokay-1 is a trace plot. It shows... This suggests...

@fig-stanareyouokay-2 is a Rhat plot. It shows... This suggests...

```{r}
#| echo: false
#| eval: true
#| message: false
#| warning: false
#| label: fig-stanareyouokay
#| fig-cap: "Checking the convergence of the MCMC algorithm"
#| fig-subcap: ["Trace plot", "Rhat plot"]
#| layout-ncol: 2

plot(first_model, "trace")

plot(first_model, "rhat")
```



\newpage


# References


